<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <link rel="stylesheet" href="../lib/bootstrap-5.1.3-dist/css/bootstrap.min.css">

    <link rel="stylesheet" href="../lib/editor/choice.css">
    <link rel="stylesheet" href="../lib//editor/line.css">
</head>

<body>
    <div class="container-md d-flex row g-3 justify-content-center">
        <h2 for="probelmContent" class="form-label probelmContent">题目</h2>
        <div class="col-md-12">
            <label for="choose-problem" class="form-label">选择题目类型</label>
            <select class="form-select" id="choose-problem" required>
                <option selected disabled value="">选择题目类型...</option>
                <option value="choice">选择</option>
                <option value="completion">填空</option>
                <option value="questions">解答</option>
            </select>
            <div class="invalid-feedback">
                Please select a valid state.
            </div>
        </div>
        <div class="" id="probelmContent" spellcheck="false"></div>
        <div class="col-12">
            <button class="btn btn-primary" type="submit">Submit form</button>
        </div>
        </form>
    </div>

    <script src="../lib/bootstrap-5.1.3-dist/js/bootstrap.min.js"></script>
    <script src="../lib/editor/editor.js"></script>
    <script src="../lib/editor/header.js"></script>
    <script src="../lib/editor/choice.js"></script>
    <script src="../lib/editor/code.js"></script>
    <script src="../lib/editor/line.js"></script>
    <script src="../lib/editor/underline.js"></script>

    <script>
        !(function () {
            let editor, pretype;

            const porblemContentRootSetting = {
                holderId: 'probelmContent',
                placeholder: '请输入题面',
                tools: {
                    选项: {
                        class: Choice,
                        inlineToolbar: ['bold', 'italic']
                    },
                    代码: {
                        class: CodeTool,
                    },
                    填空: {
                        class: InlineLine,
                    },
                    下划线: {
                        class: Underline
                    }
                },

                data: {}
            };

            const choiceOption = document.querySelector('#choose-problem');
            choiceOption.addEventListener('change', (event) => {
                const type = event.target.value;
                if (type === pretype) {
                    return;
                }
                if (pretype) {
                    editor.destroy();
                }
                pretype = type;
                switch (type) {
                    case "choice":
                        editor = new EditorJS({
                            ...porblemContentRootSetting,
                            ...{
                                placeholder: '请输入题124124面',
                            }
                        });
                        break;
                    case "completion":
                        editor = new EditorJS({
                            ...porblemContentRootSetting,
                            ...{
                                placeholder: '111',
                            }
                        });
                        break;
                }
            })
        })();
    </script>
</body>

</html>